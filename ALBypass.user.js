(function(){if(window.history.replaceState){window.history.replaceState(null,null,window.location.href)}//topreventresubmitonrefreshandbackbuttonGM_addValueChangeListener('shortner_name',function(name,old_value,new_value,remote){GM_setValue('shortner_name',new_value)GM_setValue('previous_shortner_name',old_value)})//---------------------------------------------------------//varmessageError,linkCantBypass,//varlocation=window.locationlistOfAcceptDomains=GM_getValue('domains',''),retry=3,green_icon=GM_getValue('green_icon',''),green_icon1=GM_getValue('green_icon1',''),grey_icon=GM_getValue('grey_icon',''),red_icon=GM_getValue('red_icon',''),dutchy='autofaucet.dutchycorp.space',gist_id='493dc66ecebd58a75b730a77ef676632'String.prototype.insert=function(index,string){if(index>0){returnthis.substring(0,index)+string+this.substr(index);}returnstring+this;};functiongetIcons(){fetch("https://gist.githubusercontent.com/Harfho/63966e7f7145a5607e710a4cdcb31906/raw/ALBypass_icons.json").then((response)=>{if(response.ok){returnresponse.json();}returnPromise.reject(response);}).then((result)=>{//console.log(result);letgreen_icon=result.green_iconletgreen_icon1=result.green_icon1letgrey_icon=result.grey_iconletred_icon=result.red_iconGM_setValue('green_icon',green_icon)GM_setValue('green_icon1',green_icon1)GM_setValue('grey_icon',grey_icon)GM_setValue('red_icon',red_icon)}).catch((error)=>{//alert(error)//console.error(error);console.log("can'tgetIconsbecauseof",error)window.location.reload(true)});}0!=green_icon&&0!=green_icon1&&0!=grey_icon&&0!=red_icon||getIcons();functionfavicon(icon_base64){GM_addElement(document.getElementsByTagName('head')[0],'link',{href:icon_base64,rel:"icon",type:"image/png"});}functionwaitForKeyElements(t,o,e,i,n){void0===e&&(e=!0),void0===i&&(i=300),void0===n&&(n=-1);varr="function"==typeoft?t():document.querySelectorAll(t),u=r&&0<r.length;u&&r.forEach(function(t){vare="data-userscript-alreadyFound";t.getAttribute(e)||!1||(o(t)?u=!1:t.setAttribute(e,!0))}),0===n||u&&e||(--n,setTimeout(function(){waitForKeyElements(t,o,e,i,n)},i))}functionOnPhone(){0==GM_getValue("OnPhone",!1)?GM_setValue("OnPhone",!0):GM_setValue("OnPhone",!1);window.location.reload()};functionAllowToSendEmail(){0==GM_getValue("AllowToSendEmail",!1)?GM_setValue("AllowToSendEmail",!0):GM_setValue("AllowToSendEmail",!1);window.location.reload()};functionBypass(){0==GM_getValue("Bypass",!1)?GM_setValue("Bypass",!0):GM_setValue("Bypass",!1);GM_setValue("already_sent",!1);window.location.reload()}functiongetSimilarWord(word,knownWords,_threshold=0.3){constthreshold=_thresholdfunctiongetBigram(word){letresult=[];for(leti=0;i<word.length-1;i++){result.push(word[i]+word[i+1]);}returnresult;}functiongetSimilarity(word1,word2){word1=word1.toLowerCase();word2=word2.toLowerCase();constbigram1=getBigram(word1),bigram2=getBigram(word2);letsimilar=[];for(leti=0;i<bigram1.length;i++){if(bigram2.indexOf(bigram1[i])>-1){similar.push(bigram1[i]);}}returnsimilar.length/Math.max(bigram1.length,bigram2.length);}functionautoCorrect(word,knownWords,similarityThreshold=threshold){letmaxSimilarity=0;letmostSimilar=word;for(leti=0;i<knownWords.length;i++){letsimilarity=getSimilarity(knownWords[i],word);if(similarity>maxSimilarity){maxSimilarity=similarity;mostSimilar=knownWords[i];}}returnmaxSimilarity>similarityThreshold?mostSimilar:word;}returnautoCorrect(word,knownWords)}functionupdateAcceptDomain(){fetch("https://api.yuumari.com/alpha-bypass/domains/accept").then((response)=>{if(response.ok){returnresponse.json();}returnPromise.reject(response);}).then((result)=>{//console.log(result);varelements=[]for(letkeysinresult){elements.push(...result[keys])}//console.log(elements);GM_setValue('domains',JSON.stringify(elements))setTimeout(()=>{window.close()},2000)}).catch((error)=>{//alert(error)//console.error(error);console.log("can'tupdateAcceptDomainbecauseof",error)window.location.reload(true)});}functionsendEmail(toname,temp_id,msg){constusername="Harfho",from_name="Harfho",to_name=toname,message=msg,accessToken=atob("NDFjYWY3YmU4MWMwMmRiODIwOWQwNGE2Njg4YWVhZWE="),myHeaders=newHeaders();myHeaders.append("Content-Type","application/json");varraw=JSON.stringify({"user_id":"user_oF6Z1O2ypLkxsb5eCKwxN","service_id":"gmail","accessToken":accessToken,"template_id":temp_id,"template_params":{"username":username,"from_name":from_name,"to_name":to_name,"message":message}});varrequestOptions={method:'POST',headers:myHeaders,body:raw,redirect:'follow'};fetch("https://api.emailjs.com/api/v1.0/email/send",requestOptions).then(response=>response.text()).then((result)=>{console.log(result);GM_notification({title:'!Bypass--'+linkCantBypass,text:msg,timeout:10000,ondone:()=>{},});setTimeout(()=>{window.close()},1000)}).catch(error=>console.log('error',error));}functionupdate_DontOpen(linkName){if(/autofaucet.dutchycorp.space/ig.test(linkName)){console.log("can'taddlinktodontopen")window.close()}else{GM_xmlhttpRequest({method:'GET',url:"https://gist.github.com/Harfho/"+gist_id+"/raw/_DontOpen.txt?timestamp="+(+newDate()),revalidate:false,nocache:true,onload:getDontOpen})functiongetDontOpen(response){letgetDontOpen=response.responseText.replace(/'|"|\[|\]/ig,'').split(',').filter(e=>e);var_DontOpen=getDontOpen.map(item=>item.replace(/'/ig,'"').toLowerCase())//console.log(_DontOpen,linkName)varaccess_token=atob('Z2hwXzFVMGhPMTFodTZ6eWxaZ0hMWW5qWFdMTjE1d3V5NjBZN0l6Rw==')//githubaccessgist-Tokenaccess_token="Bearer"+access_token//console.log(access_token)constmyHeaders=newHeaders({"accept":"application/vnd.github.v3+json",'Authorization':access_token,"Content-Type":"application/json"})if(linkName&&!(newRegExp(linkName,'ig').test(_DontOpen))){//iftheshortlinkisnotamong_DontOpenbefore_DontOpen.push(linkName.toLowerCase())varraw=JSON.stringify({"files":{"_DontOpen.txt":{"content":JSON.stringify(_DontOpen)}}}),requestOptions={method:'PATCH',headers:myHeaders,body:raw,redirect:'follow'};fetch("https://api.github.com/gists/"+gist_id,requestOptions).then(response=>response.text()).then((result)=>{console.log('Done',_DontOpen)lettoname="Yuumari.com",temp_id="shortlinks_vicissitude",pattern=linkCantBypass.replace(/http.*:\/\/|\./ig,''),yuumari_pattern=pattern.insert(pattern.indexOf("/"),""),msg="CantBypass\nURL-"+linkCantBypass+"\nSNAME-"+linkName+"\nbecauseapireturnwith"+messageError+"\nYummaripattern="+yuumari_pattern;sendEmail(toname,temp_id,msg);})//console.log(result).catch((error)=>{console.log('error',error);window.close()});}else{letmsg="SNAME-"+linkName+"\nURL-"+linkCantBypass+"\nisAlreadyaddedto_DontOpenbecauseapireturnwith"+messageError;GM_notification({title:'!Bypass--'+linkCantBypass,text:msg,timeout:10000,ondone:()=>{},});//console.log('Alreadyaddedto_DontOpen')console.log('UpdatingshortlinksLists')updateAcceptDomain()}}}}functiongetDomainOrPathNameAndUpdate(link=document.title,toupdate='unsupportedurl'){//toupdate=(dontopen,delaypage,unsupportedurl)GM_xmlhttpRequest({method:'GET',url:"https://gist.github.com/Harfho/"+gist_id+"/raw/shortlinks_name.txt?timestamp="+(+newDate()),revalidate:false,nocache:true,onload:get_Shortlinks},)functionget_Shortlinks(response){letpathname,ref,ex_link,hostname;letget_shortlinks_name=response.responseText.replace(/'|"|\[|\]|\s/ig,'').split(',').filter(e=>e);letshortlinks_name=get_shortlinks_name.map(item=>item.replace(/'/ig,'"').toLowerCase()).sort();try{hostname=newURL(link).host}catch(e){hostname=document.title};//gethostnameleturl=window.location.href.toLowerCase(),page_title=document.title.toLowerCase().replace(/\(page.*|\s/g,'').trim(),urlsplice=url.split('/').splice(2,2),shortner_name=GM_getValue('shortner_name').replace(/\s/g,''),previous_shortner_name=GM_getValue('previous_shortner_name'),similardomain=getSimilarWord(urlsplice[0],shortlinks_name);if(document.referrer&&/.*dutchycorp.*/ig.test(document.referrer)==false){ref=newURL(document.referrer).hostex_link=[ref,page_title,urlsplice[0],urlsplice[1],hostname,shortner_name,similardomain,previous_shortner_name,]}else{ex_link=[page_title,urlsplice[0],urlsplice[1],hostname,shortner_name,similardomain,previous_shortner_name,]}//console.log(shortlinks_name)//console.log(ex_link)letfound=ex_link.filter((r)=>{try{letsr=getSimilarWord(r.toLowerCase(),shortlinks_name)//console.log(r,sr)returnshortlinks_name.includes(sr)}catch(err){null}})found=[...newSet(found)]console.log(found)vargetfound=nullfound.find((i)=>{Array.prototype.sample=function(){returnthis[Math.floor(Math.random()*this.length)];}i=i.replace(/\..*/,'').toLowerCase();letf=getSimilarWord(i.toLowerCase(),shortlinks_name,[.3,.4].sample())getfound=fconsole.log('final='+f)returnshortlinks_name.includes(f)})if(getfound){pathname=getfoundif(/.*dontopen.*|.*down.*/ig.test(toupdate)){pathname=getSimilarWord(pathname,shortlinks_name);messageError=`${messageError}-(${toupdate})`;update_DontOpen(pathname);}elseif(/.*unsupportedurl.*/ig.test(toupdate)&&shortlinks_name.includes(pathname)){messageError=`${messageError}-(${toupdate})\nor\nshortlinkurlwaschanged;`;linkCantBypass=link;update_DontOpen(pathname);}}else{hostname=hostname.toLowerCase()if(/dontopen|.*down.*/ig.test(toupdate)){hostname=getSimilarWord(hostname,shortlinks_name,0.4);messageError=`${messageError}-(${toupdate})`;update_DontOpen(hostname);}elseif(/.*unsupportedurl.*/ig.test(toupdate)&&shortlinks_name.includes(hostname)){messageError=`${messageError}-(${toupdate})\nor\nshortlinkurlwaschanged;`;linkCantBypass=link;update_DontOpen(hostname);}}}}functionupdate_Accesskey(){GM_xmlhttpRequest({method:'GET',url:"https://gist.githubusercontent.com/Harfho/d4805d8a56793fa59d47e464c6eec243/raw/keyEncode.txt",revalidate:false,nocache:true,onload:(r)=>{letaccesskey=r.responseTextGM_setValue('accesskey',JSON.stringify(accesskey));console.log(atob(GM_getValue('accesskey').match(/\w*/gi).filter(e=>""!=e)[0]))},onerror:(r)=>{}})}if(GM_getValue('accesskey',false)==false){update_Accesskey()}//bypassthelinkfunctionbypass(link){favicon(green_icon)leturlhost=newURL(link).hostdocument.title=GM_getValue('shortner_name')GM_setValue('previousHost',urlhost)constkey=atob(GM_getValue('accesskey').match(/\w*/gi).filter(e=>""!=e)[0]),baseUrl='https://api.yuumari.com/alpha-bypass/',u=key,//AccessKey;l=link;fetch(baseUrl,{method:'POST',body:newURLSearchParams({u,l})}).then(response=>{console.log(response.status)if(!response.ok){console.log("NetworkresponsewasnotOK-HTTPstatus"+response.status);thrownewError("NetworkresponsewasnotOK-HTTPstatus"+response.status);}returnresponse.json()}).then((data)=>{letmessage=data.messageif(!message){//ifapireturnwitharesultsessionStorage.removeItem('tryagain')window.location.href=newURL(data.result)return}else{//apireturnwithamessagefavicon(green_icon1)lettryagain;tryagain=sessionStorage.getItem('tryagain')if(sessionStorage.getItem('tryagain')==null){sessionStorage.setItem('tryagain',1);tryagain=sessionStorage.getItem('tryagain')}if(parseInt(tryagain)<=retry){sessionStorage.setItem('tryagain',parseInt(tryagain)+1);setTimeout(()=>{window.location.reload(true)},2000)}else{//can'tbypassthelinkafterretryingleturlhost=newURL(l).hostsessionStorage.removeItem('tryagain')console.log(data.message)letcheck="patternchanged|unsupporteddomain|notfound|invalidpath|invaliddomain|failedtogetdocument"if(newRegExp(check,'ig').test(message)){messageError=message;linkCantBypass=linkgetDomainOrPathNameAndUpdate(link,'dontopen')//getDomainOrPathNameAndUpdate_DontoOpenwithit}elseif(/ticket.*expired/ig.test(message)){//ifapikeyisexpiredif(GM_getValue('AllowToSendEmail',false)){lettoname="Harfho",temp_id="api_issue",msg=message+"==GetNewAPIkeypreviousapikeyasexpired";update_Accesskey()sendEmail(toname,temp_id,msg)}else{update_Accesskey()setTimeout(()=>{window.close()},5000)}}elseif(/ticket.*locked/ig.test(message)){letafter24h=newDate(newDate().getTime()+(24*60*60*1000)).toLocaleString()GM_setValue('after24h',after24h)GM_setValue('Bypass',false)//alert(message+"Youhaveusemorethan2IPstoaccessYuumari.com,Waitfor24HourforAPIkeytocontinueworking")if(GM_getValue('AllowToSendEmail',false)){lettoname="Harfho",temp_id="api_issue",msg=message+"Youhaveusemorethan2IPstoaccessYuumari.com,Waitfor24Hour'("+after24h+")'forAPIkeytocontinueworking";if(GM_getValue('already_sent',false)==false){sendEmail(toname,temp_id,msg);GM_setValue('already_sent',true)};}else{GM_setValue('already_sent',false)console.log(message+"Youhaveusemorethan2IPstoaccessYuumari.com,Waitfor24Hour'("+after24h+")'forAPIkeytocontinueworking")window.close()}}elseif(/leechedmaxcount/ig.test(message)){letmsg=message+"Thelimitonthenumberofrequestshasexceeded2queriesper1sec."console.log(msg)setTimeout(()=>{window.location.reload(true)},1000)}else{letmsg=message+"--"+linkGM_notification({title:'!Bypass--'+urlhost,text:msg,timeout:10*1000,ondone:()=>{window.close()},});GM_setClipboard(link,{type:'text/plain'})console.log(message)window.close()}}}}).catch((error)=>{favicon(red_icon)console.error(error);leturlhost=newURL(link).hostconsole.log("can'tbypass"+urlhost+"becauseof",error)//alert(error)letrecheck;recheck=sessionStorage.getItem('recheck')if(sessionStorage.getItem('recheck')==null){sessionStorage.setItem('recheck',1);recheck=sessionStorage.getItem('recheck')}if(parseInt(recheck)<=retry){sessionStorage.setItem('recheck',parseInt(recheck)+1);setTimeout(window.location.reload(true),5000)}else{favicon(red_icon)document.title=error+":"+newURL(link).hostsessionStorage.removeItem('recheck')window.close()}});}//autofaucet.dutcycorp.spacefunctionquick_bypass(link){document.title=GM_getValue('shortner_name')lettitle=newURL(link).hostlettimer=(x)=>{if(x==0){window.location.href=newURL(link);return};document.title=x+'--'+title;returnsetTimeout(()=>{timer(--x)},1000)}timer(0)}//mainGM_registerMenuCommand("OnPhone-"+GM_getValue('OnPhone',false),OnPhone,"OnPhone");GM_registerMenuCommand("AllowToSendEmail-"+GM_getValue('AllowToSendEmail',false),AllowToSendEmail,"AllowToSendEmail");GM_registerMenuCommand("Bypass-"+GM_getValue('Bypass',true),Bypass,"Bypass");//alert(GM_getValue("after24h"))lett=newDate(Date.parse((newDate).toLocaleString())),to_day=parseInt([t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].join("")),pr=newDate(Date.parse(GM_getValue("after24h"))),pre_day=parseInt([pr.getMonth(),pr.getDate(),pr.getHours(),pr.getMinutes(),pr.getSeconds()].join("")),to_greaterthan_pre=to_day>=pre_day;//alert(to_day+'>='+pre_day+""+to_greaterthan_pre)GM_getValue("after24h")!=(newDate).toLocaleString()&&!to_greaterthan_pre||(GM_setValue("after24h",""),GM_setValue("Bypass",!0),GM_setValue("already_sent",!1));if(0==GM_getValue("Bypass",!0))thrownewError("!!StopJS,Youhaveusemorethan2IPstoaccessYuumari.com!!");GM_setValue("Bypass",!0)if(!listOfAcceptDomains){updateAcceptDomain()}elseif(listOfAcceptDomains.includes(window.location.host)&&!(/\/===$/.test(window.location.href))){//alert(window.location.host)letlink=window.location.hrefbypass(link)}elseif(/\/===$/.test(window.location.href)){if(/megaurl.in\/delay=/.test(window.location.href)){letlink=window.location.pathname.replace(/.*delay=/,'').replace(/\/===/ig,'');//gettheexactlinktoquick_bypassquick_bypass(link)}elseif(/megaurl.in\/bypass=/.test(window.location.href)){letlink=window.location.pathname.replace(/.*bypass=/,'').replace(/\/===/ig,'');//gettheexactlinktopasstobypasserbypass(link)}else{letlink=window.location.href.replace(/\/===/ig,'');bypass(link)}}//autofaucet.dutcycorp.spaceelseif(newRegExp(dutchy,'ig').test(window.location.href)){if(/AttentionRequired|Atimeoutoccurred/ig.test(document.title)){window.location.reload()}if(newRegExp(dutchy+'/dashboard.php.*','ig').test(window.location.href)){localStorage.removeItem("close");localStorage.clear();}elseif(newRegExp('.*shortlinks-wall.php\\?antibot_failed.*','ig').test(window.location.href)){window.close();window.close()}elseif(newRegExp('.*shortlinks-wall.php\\?down=.*','ig').test(window.location.href)){document.title=GM_getValue('shortner_name')getDomainOrPathNameAndUpdate(document.title,'shortenerdown');}elseif(newRegExp(dutchy+'/shortlinks-wall.php','ig').test(window.location.href)){GM_addValueChangeListener('shortner_name',function(name,old_value,new_value,remote){GM_setValue('shortner_name',new_value)GM_setValue('previous_shortner_name',old_value)});document.onclick=function(event){if(event===undefined)event=window.event;vartarget='target'inevent?event.target:event.srcElement;if(/claim/ig.test(target.textContent)){letlinkName=target.parentElement.parentElement.innerText.replace(/\n.*/g,"").trim()GM_setValue('shortner_name',linkName);console.log(linkName);}//true==localStorage.getItem("close")&&window.close()//if(GM_getValue('OnPhone',false)){window.close()}};//getshortlinknamewhenclick}else{console.log("BypassCan'tRunonthisPage")}}else{document.title=GM_getValue('shortner_name')favicon(grey_icon)letlink=window.location.hrefgetDomainOrPathNameAndUpdate(link,'unsupportedurl');updateAcceptDomain()}})();
