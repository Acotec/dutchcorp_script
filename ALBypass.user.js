window.history.replaceState&&window.history.replaceState(null,null,window.location.href),GM_addValueChangeListener("shortner_name",function(e,t,o,n){GM_setValue("shortner_name",o),GM_setValue("previous_shortner_name",t)});var messageError,linkCantBypass,listOfAcceptDomains=GM_getValue("domains",""),retry=3,green_icon=GM_getValue("green_icon",""),green_icon1=GM_getValue("green_icon1",""),grey_icon=GM_getValue("grey_icon",""),red_icon=GM_getValue("red_icon",""),dutchy="autofaucet.dutchycorp.space",gist_id="493dc66ecebd58a75b730a77ef676632";function getIcons(){fetch("https://gist.githubusercontent.com/Harfho/63966e7f7145a5607e710a4cdcb31906/raw/ALBypass_icons.json").then(e=>e.ok?e.json():Promise.reject(e)).then(e=>{var t=e.green_icon,o=e.green_icon1,n=e.grey_icon,e=e.red_icon;GM_setValue("green_icon",t),GM_setValue("green_icon1",o),GM_setValue("grey_icon",n),GM_setValue("red_icon",e)}).catch(e=>{console.log("can't get Icons because of ",e),window.location.reload(!0)})}function favicon(e){GM_addElement(document.getElementsByTagName("head")[0],"link",{href:e,rel:"icon",type:"image/png"})}function waitForKeyElements(e,o,t,n,a){void 0===t&&(t=!0),void 0===n&&(n=300),void 0===a&&(a=-1);var s="function"==typeof e?e():document.querySelectorAll(e),i=s&&0<s.length;i&&s.forEach(function(e){var t="data-userscript-alreadyFound";e.getAttribute(t)||(o(e)?i=!1:e.setAttribute(t,!0))}),0===a||i&&t||(--a,setTimeout(function(){waitForKeyElements(e,o,t,n,a)},n))}function OnPhone(){0==GM_getValue("OnPhone",!1)?GM_setValue("OnPhone",!0):GM_setValue("OnPhone",!1),window.location.reload()}function AllowToSendEmail(){0==GM_getValue("AllowToSendEmail",!1)?GM_setValue("AllowToSendEmail",!0):GM_setValue("AllowToSendEmail",!1),window.location.reload()}function Bypass(){0==GM_getValue("Bypass",!1)?GM_setValue("Bypass",!0):GM_setValue("Bypass",!1),GM_setValue("already_sent",!1),window.location.reload()}function getSimilarWord(e,t,i=.3){function r(t){let o=[];for(let e=0;e<t.length-1;e++)o.push(t[e]+t[e+1]);return o}return function(t,o,e=i){let n=0,a=t;for(let e=0;e<o.length;e++){var s=function(e,t){e=e.toLowerCase(),t=t.toLowerCase();const o=r(e),n=r(t);let a=[];for(let e=0;e<o.length;e++)-1<n.indexOf(o[e])&&a.push(o[e]);return a.length/Math.max(o.length,n.length)}(o[e],t);s>n&&(n=s,a=o[e])}return n>e?a:t}(e,t)}function updateAcceptDomain(){fetch("https://api.yuumari.com/alpha-bypass/domains/accept").then(e=>e.ok?e.json():Promise.reject(e)).then(e=>{var t,o=[];for(t in e)o.push(...e[t]);GM_setValue("domains",JSON.stringify(o)),setTimeout(()=>{window.close()},2e3)}).catch(e=>{console.log("can't updateAcceptDomain because of ",e),window.location.reload(!0)})}function sendEmail(e,t,o){const n=e,a=o,s=atob("NDFjYWY3YmU4MWMwMmRiODIwOWQwNGE2Njg4YWVhZWE="),i=new Headers;i.append("Content-Type","application/json");t=JSON.stringify({user_id:"user_oF6Z1O2ypLkxsb5eCKwxN",service_id:"gmail",accessToken:s,template_id:t,template_params:{username:"Harfho",from_name:"Harfho",to_name:n,message:a}}),t={method:"POST",headers:i,body:t,redirect:"follow"};fetch("https://api.emailjs.com/api/v1.0/email/send",t).then(e=>e.text()).then(e=>{console.log(e),GM_notification({title:"!Bypass-- "+linkCantBypass,text:o,timeout:1e4,ondone:()=>{}}),setTimeout(()=>{window.close()},1e3)}).catch(e=>console.log("error",e))}function update_DontOpen(s){/.*autofaucet.dutchycorp.space.*/gi.test(s)?console.log("Cant add "+s+" to list"):GM_xmlhttpRequest({method:"GET",url:"https://gist.github.com/Harfho/"+gist_id+"/raw/_DontOpen.txt?timestamp="+ +new Date,revalidate:!1,nocache:!0,onload:function(e){let t=e.responseText.replace(/'|"|\[|\]/gi,"").split(",").filter(e=>e);var a=t.map(e=>e.replace(/'/gi,'"').toLowerCase()),o=atob("Z2hwXzFVMGhPMTFodTZ6eWxaZ0hMWW5qWFdMTjE1d3V5NjBZN0l6Rw==");o="Bearer "+o;e=new Headers({accept:"application/vnd.github.v3+json",Authorization:o,"Content-Type":"application/json"});s&&!new RegExp(s,"ig").test(a)?(a.push(s.toLowerCase()),o=JSON.stringify({files:{"_DontOpen.txt":{content:JSON.stringify(a)}}}),fetch("https://api.github.com/gists/"+gist_id,{method:"PATCH",headers:e,body:o,redirect:"follow"}).then(e=>e.text()).then(e=>{console.log("Done",a);let t=linkCantBypass.replace(/http.*:\/\/|\./gi," "),o=t.insert(t.indexOf("/")," "),n="Cant Bypass \nURL-"+linkCantBypass+"\nSNAME-"+s+"\nbecause api return with "+messageError+"\nYummari pattern="+o;sendEmail("Yuumari.com","shortlinks_vicissitude",n)}).catch(e=>{console.log("error",e),window.close()})):(GM_notification({title:"!Bypass-- "+linkCantBypass,text:"SNAME-"+s+"\nURL-"+linkCantBypass+"\nis Already added to _DontOpen because api return with "+messageError,timeout:1e4,ondone:()=>{}}),updateAcceptDomain())}})}function getDomainOrPathNameAndUpdate(m,w){GM_xmlhttpRequest({method:"GET",url:"https://gist.github.com/Harfho/"+gist_id+"/raw/shortlinks_name.txt?timestamp="+ +new Date,revalidate:!1,nocache:!0,onload:function(e){let t,o,n,a=e.responseText.replace(/'|"|\[|\]|\s/gi,"").split(",").filter(e=>e),s=a.map(e=>e.replace(/'/gi,'"').toLowerCase()).sort(),i=window.location.href.toLowerCase(),r=document.title.toLowerCase().trim(),l=new URL(m).host,c=i.split("/").splice(2,2),u=GM_getValue("shortner_name").replace(/\s/g,""),d=GM_getValue("previous_shortner_name"),p=getSimilarWord(c[0],s);n=document.referrer&&!/.*dutchycorp.*/gi.test(document.referrer)?(o=new URL(document.referrer).host,[o,c[0],c[1],r,l,u,p,p,d]):[c[0],c[1],r,l,,u,p,d];let g=n.filter(e=>{var t=getSimilarWord(e.toLowerCase(),s);return console.log(e),s.includes(t)});g=[...new Set(g)],console.log(g);var h=null;g.find(e=>{Array.prototype.sample=function(){return this[Math.floor(Math.random()*this.length)]};e=getSimilarWord(e.toLowerCase(),s,[.3,.4].sample());return h=e,console.log(e),s.includes(e)}),h?(t=h,/.*dontopen.*/gi.test(w)?(t=getSimilarWord(t,s),update_DontOpen(t)):/.*unsupported url.*/gi.test(w)&&s.includes(t)&&(messageError=w+"\nor\nshortlink url was changed",linkCantBypass=m,update_DontOpen(t))):(l=l.toLowerCase(),/dontopen/gi.test(w)?(l=getSimilarWord(l,s,.4),update_DontOpen(l)):/.*unsupported url.*/gi.test(w)&&s.includes(l)&&(messageError=w+"\nor\nshortlink url was changed",linkCantBypass=m,update_DontOpen(l)))}})}function update_Accesskey(){GM_xmlhttpRequest({method:"GET",url:"https://gist.githubusercontent.com/Harfho/d4805d8a56793fa59d47e464c6eec243/raw/keyEncode.txt",revalidate:!1,nocache:!0,onload:e=>{e=e.responseText;GM_setValue("accesskey",JSON.stringify(e)),console.log(atob(GM_getValue("accesskey").match(/\w*/gi).filter(e=>""!=e)[0]))},onerror:e=>{}})}function bypass(i){favicon(green_icon);var e=new URL(i).host;document.title=e,GM_setValue("previousHost",e);var e=atob(GM_getValue("accesskey").match(/\w*/gi).filter(e=>""!=e)[0]),r=i;fetch("https://api.yuumari.com/alpha-bypass/",{method:"POST",body:new URLSearchParams({u:e,l:r})}).then(e=>{if(console.log(e.status),!e.ok)throw console.log("Network response was not OK - HTTP status "+e.status),new Error("Network response was not OK - HTTP status "+e.status);return e.json()}).then(t=>{var o,n,a,s=t.message;if(s){favicon(green_icon1);let e;e=sessionStorage.getItem("tryagain"),null==sessionStorage.getItem("tryagain")&&(sessionStorage.setItem("tryagain",1),e=sessionStorage.getItem("tryagain")),parseInt(e)<=retry?(sessionStorage.setItem("tryagain",parseInt(e)+1),setTimeout(()=>{window.location.reload(!0)},2e3)):(o=new URL(r).host,sessionStorage.removeItem("tryagain"),console.log(t.message),new RegExp("pattern changed|unsupported domain|not found|invalid path|invalid domain|failed to get document","ig").test(s)?(messageError=s,getDomainOrPathNameAndUpdate(linkCantBypass=i,"dontopen")):/ticket.*expired/gi.test(s)?GM_getValue("AllowToSendEmail",!1)?(n=s+"==Get New API key previous api key as expired",update_Accesskey(),sendEmail("Harfho","api_issue",n)):(update_Accesskey(),setTimeout(()=>{window.close()},5e3)):/ticket.*locked/gi.test(s)?(a=new Date((new Date).getTime()+864e5).toLocaleString(),GM_setValue("after24h",a),GM_setValue("Bypass",!1),GM_getValue("AllowToSendEmail",!1)?(n=s+"You have use more than 2 IPs to access Yuumari.com,Wait for 24Hour '("+a+")' for API key to continue working",0==GM_getValue("already_sent",!1)&&(sendEmail("Harfho","api_issue",n),GM_setValue("already_sent",!0))):(GM_setValue("already_sent",!1),console.log(s+"You have use more than 2 IPs to access Yuumari.com,Wait for 24Hour '("+a+")' for API key to continue working"),window.close())):/leeched max count/gi.test(s)?(a=s+"The limit on the number of requests has exceeded 2 queries per 1sec.",console.log(a),setTimeout(()=>{window.location.reload(!0)},1e3)):(GM_notification({title:"!Bypass-- "+o,text:s+"--"+i,timeout:1e4,ondone:()=>{window.close()}}),GM_setClipboard(i,{type:"text/plain"}),window.close()))}else sessionStorage.removeItem("tryagain"),window.location.href=new URL(t.result)}).catch(e=>{favicon(red_icon),console.error(e);var t=new URL(i).host;console.log("can't bypass "+t+" because of",e);let o;o=sessionStorage.getItem("recheck"),null==sessionStorage.getItem("recheck")&&(sessionStorage.setItem("recheck",1),o=sessionStorage.getItem("recheck")),parseInt(o)<=retry?(sessionStorage.setItem("recheck",parseInt(o)+1),setTimeout(window.location.reload(!0),5e3)):(favicon(red_icon),document.title=e+":"+new URL(i).host,sessionStorage.removeItem("recheck"),window.location.close())})}function shortenerDown(e){/.*This shortener is down right now.*/gi.test(e.textContent.toLowerCase())?(messageError="This shortener is down right now",document.referrer?update_DontOpen(document.referrer):update_DontOpen(GM_getValue("shortner_name"))):window.close()}function quick_bypass(t){var o=new URL(t).host;let n=e=>{if(0!=e)return document.title=e+"--"+o,setTimeout(()=>{n(--e)},1e3);window.location.href=new URL(t)};n(0)}String.prototype.insert=function(e,t){return 0<e?this.substring(0,e)+t+this.substr(e):t+this},0!=green_icon&&0!=green_icon1&&0!=grey_icon&&0!=red_icon||getIcons(),0==GM_getValue("accesskey",!1)&&update_Accesskey(),GM_registerMenuCommand("OnPhone-"+GM_getValue("OnPhone",!1),OnPhone,"OnPhone"),GM_registerMenuCommand("AllowToSendEmail-"+GM_getValue("AllowToSendEmail",!1),AllowToSendEmail,"AllowToSendEmail"),GM_registerMenuCommand("Bypass-"+GM_getValue("Bypass",!0),Bypass,"Bypass");let t=new Date(Date.parse((new Date).toLocaleString())),to_day=parseInt([t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()].join("")),pr=new Date(Date.parse(GM_getValue("after24h"))),pre_day=parseInt([pr.getMonth(),pr.getDate(),pr.getHours(),pr.getMinutes(),pr.getSeconds()].join("")),to_greaterthan_pre=to_day>=pre_day;if(GM_getValue("after24h")!=(new Date).toLocaleString()&&!to_greaterthan_pre||(GM_setValue("after24h",""),GM_setValue("Bypass",!0),GM_setValue("already_sent",!1)),0==GM_getValue("Bypass",!0))throw new Error("!! Stop JS, You have use more than 2 IPs to access Yuumari.com !!");if(GM_setValue("Bypass",!0),listOfAcceptDomains)if(listOfAcceptDomains.includes(window.location.host)&&!/\/===$/.test(window.location.href)){let e=window.location.href;document.title=new URL(e).host,bypass(e)}else if(/\/===$/.test(window.location.href))if(/megaurl.in\/delay=/.test(window.location.href)){let e=window.location.pathname.replace(/.*delay=/,"").replace(/\/===/gi,"");quick_bypass(e)}else if(/megaurl.in\/bypass=/.test(window.location.href)){let e=window.location.pathname.replace(/.*bypass=/,"").replace(/\/===/gi,"");document.title=new URL(e).host,bypass(e)}else{let e=window.location.href.replace(/\/===/gi,"");bypass(e)}else if(new RegExp(dutchy,"ig").test(window.location.href))/Attention Required|A timeout occurred/gi.test(document.title)&&window.location.reload(),new RegExp(dutchy+"/dashboard.php.*","ig").test(window.location.href)?(localStorage.removeItem("close"),localStorage.clear()):new RegExp(".*shortlinks-wall.php\\?antibot_failed.*","ig").test(window.location.href)?(window.close(),window.close()):new RegExp(".*shortlinks-wall.php\\?down=.*","ig").test(window.location.href)?waitForKeyElements("#toast-container",e=>{shortenerDown(e)}):new RegExp(dutchy+"/shortlinks-wall.php","ig").test(window.location.href)?(GM_addValueChangeListener("shortner_name",function(e,t,o,n){GM_setValue("shortner_name",o),GM_setValue("previous_shortner_name",t)}),document.onclick=function(e){void 0===e&&(e=window.event);e="target"in e?e.target:e.srcElement;/claim/gi.test(e.textContent)&&(e=e.parentElement.parentElement.innerText.replace(/\n.*/g,"").trim(),GM_setValue("shortner_name",e),console.log(e))}):console.log("Bypass Can't Run on this Page");else{favicon(grey_icon);let e=window.location.href;getDomainOrPathNameAndUpdate(e,"unsupported url"),updateAcceptDomain()}else updateAcceptDomain();
